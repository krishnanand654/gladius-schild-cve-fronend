/* eslint-disable react/prop-types */
import { CircularProgress, CardFooter, Chip, Card, CardBody } from "@nextui-org/react";
import { Accordion, AccordionItem } from "@nextui-org/react";

export default function Progressx({ percent, score, isloading, data }) {
    return (
        <Card className="w-full h-full  bg-black text-white border-none mt-3 sm:mt-5 lg:mt-8 z-0 " style={{ boxShadow: 'none' }}>
            <CardBody className="flex justify-center items-center pb-0">
                <CircularProgress
                    classNames={{
                        svg: "w-48 h-48",
                        size: "lg",
                        indicator: `${percent > 70 && percent < 100 ? "stroke-danger" : percent > 50 && percent < 70 ? "stroke-warning" : "stroke-success"}`,
                        track: "stroke-white/10",
                        value: "text-4xl font-semibold primary",
                    }}
                    value={percent}
                    valueLabel={isloading ? "loading" : score ? score : "No metrics recorded"}
                    strokeWidth={4}
                    showValueLabel={true}
                />
            </CardBody>
            <CardFooter className="flex-col h-full justify-center items-center pt-0 ">


                {data?.cvssMetricV31 ?
                    <>
                        <table className="metrics-table mt-3" >
                            <tr>
                                <td colSpan={2}>
                                    <Chip
                                        color="warning"
                                        classNames={{
                                            base: "border-1 border-white/30",
                                            content: "text-white/90 text-small font-semibold",
                                        }}

                                        variant="bordered">{data?.cvssMetricV31[0]?.cvssData.vectorString}</Chip>
                                </td>
                            </tr>
                            <tr>
                                <td >Version</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot"
                                >{data?.cvssMetricV31[0]?.cvssData.version}</Chip></td>
                            </tr>
                            <tr>
                                <td >Attack complexity</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.attackComplexity}</Chip></td>
                            </tr>
                            <tr>
                                <td >Attack vector</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.attackVector}</Chip></td>
                            </tr>
                            <tr>
                                <td style={{ width: '180px' }}>confidentiality impact</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.confidentialityImpact}</Chip></td>
                            </tr>
                            <tr>
                                <td>integrity Impact</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.integrityImpact}</Chip></td>
                            </tr>
                            <tr >
                                <td >availability Impact</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.availabilityImpact}</Chip></td>
                            </tr>
                            <tr >
                                <td >baseScore</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.baseScore}</Chip></td>
                            </tr>
                            <tr>
                                <td >baseSeverity</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.cvssData.baseSeverity}</Chip></td>
                            </tr>
                            <tr>
                                <td>exploitabilityScore</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.exploitabilityScore}</Chip></td>
                            </tr>
                            <tr>
                                <td >impactScore</td>
                                <td className="pl-[50px]"><Chip
                                    color="warning"
                                    classNames={{
                                        base: "border-1 border-white/30",
                                        content: "text-white/90 text-small font-semibold",
                                    }}
                                    variant="dot">{data?.cvssMetricV31[0]?.impactScore}</Chip></td>
                            </tr>

                        </table>
                    </>
                    : null}

            </CardFooter>
        </Card>
    );
}

